---
title: "아이디어에서 인터랙티브 지식 그래프까지: Jekyll과 D3.js 개발기"
date: 2025-08-10 23:55:00 +0900
categories: Tech
author: "Gemini"
---

## 시작하며: 흩어진 지식을 연결하려는 시도

개인 위키처럼 사용되는 Obsidian의 가장 큰 장점 중 하나는 `[[위키 링크]]`를 통해 문서들을 유기적으로 연결할 수 있다는 점입니다. 하지만 이 연결 관계는 개별 문서를 열어보기 전까지는 한눈에 파악하기 어렵습니다. 여기서 "이 연결망을 시각적인 그래프로 표현할 수 있다면 어떨까?"라는 아이디어가 떠올랐고, 이것이 오늘 진행한 '아카이브 그래프 페이지' 개발의 시작이었습니다.

목표는 명확했습니다. Jekyll 블로그의 `_obsidian` 컬렉션에 있는 마크다운 문서들을 분석하여, 문서 간의 링크를 기반으로 상호작용이 가능한 네트워크 그래프를 웹 페이지에 구현하는 것이었습니다.

## 1단계: 데이터 생성 - Jekyll Liquid로 그래프 데이터 파싱하기

가장 먼저 부딪힌 난관은 Jekyll 환경에서 어떻게 동적으로 그래프 데이터를 생성할 것인가였습니다. D3.js가 그래프를 그리려면 노드(문서)와 엣지(링크) 정보가 담긴 JSON 데이터가 필요했습니다.

**문제점:**
*   Jekyll의 빌드 시점에, 서버 사이드 스크립트 없이 순수 Liquid 템플릿 언어만으로 수십 개의 문서 파일을 순회하고, 각 파일의 내용에서 `[[링크]]` 구문을 파싱하여 JSON 구조를 만들어야 했습니다.

**해결 과정:**
복잡한 Liquid 필터 체인을 사용하여 이 문제를 해결했습니다.
1.  `site.obsidian`으로 모든 관련 문서를 가져옵니다.
2.  `for` 루프를 돌며 각 문서의 `doc.content`를 `split: '[['`과 `split: ']]'` 필터로 분해하여 링크 텍스트만 추출했습니다.
3.  `[[링크|별칭]]`이나 `[[링크#헤더]]` 같은 변형된 링크 형식을 처리하기 위해 `split: '|'`과 `split: '#'`를 추가로 적용하여 순수한 링크 대상만 정규화했습니다.
4.  이렇게 추출한 데이터를 조합하여, 최종적으로 자바스크립트가 바로 사용할 수 있는 형태의 JSON 객체를 페이지에 직접 출력하는 방식으로 데이터를 준비했습니다.

## 2단계: 시각화 - D3.js로 생명 불어넣기

데이터가 준비되었으니, 이제 D3.js를 사용해 이를 시각화할 차례였습니다.

**문제점:**
*   **물리 시뮬레이션 튜닝:** 처음 렌더링된 그래프는 노드들이 한쪽으로 쏠리거나, 화면 밖으로 튕겨 나가거나, 서로 겹치는 등 매우 불안정했습니다.
*   **링크-URL 매핑:** `[[AActor]]`라는 링크 텍스트를 실제 웹사이트의 `/obsidian/Unreal/AActor.html`이라는 URL로 변환할 방법이 필요했습니다.

**해결 과정:**
1.  **Force Simulation 정밀 제어:** D3.js의 물리 기반 시뮬레이션을 세밀하게 조정했습니다.
    *   `forceManyBody`: 노드 사이에 서로 밀어내는 힘(척력)을 주어 겹침을 방지했습니다. 이 값을 `-50`으로 설정하여 노드들이 적절한 거리를 유지하도록 했습니다.
    *   `forceLink`: 연결된 노드끼리 끌어당기는 힘을 설정했습니다. (초기에는 이 값을 조절하는 UI도 있었지만, 최종적으로는 D3의 기본값(30)을 사용하기로 했습니다.)
    *   `forceCenter`: 전체 그래프가 화면 중앙에 머물도록 잡아주는 힘을 추가하여 안정성을 높였습니다.
2.  **`lookupMap` 구현:** 페이지 로드 시, 모든 문서의 제목과 실제 URL을 키-값 쌍으로 하는 `Map` 객체(`lookupMap`)를 생성했습니다. 이후 링크를 처리할 때마다 이 `Map`을 조회하여 O(1)의 빠른 속도로 정확한 URL을 찾아낼 수 있었습니다.

## 3단계: 상호작용과 최적화 - 사용자 경험 끌어올리기

단순히 보여주는 것을 넘어, 사용자가 그래프와 상호작용하며 정보를 탐색할 수 있도록 만드는 것이 마지막 목표였습니다.

**문제점:**
*   **상태 동기화:** 그래프의 노드, 우측의 문서 목록, 하단의 문서 내용 뷰라는 세 가지 컴포넌트의 상태(선택, 호버 등)를 일관되게 유지하는 것이 복잡했습니다.
*   **성능 최적화:** 노드에 마우스를 올릴 때마다 연결된 모든 노드를 찾는 작업은 성능 저하의 원인이 될 수 있었습니다.

**해결 과정:**
1.  **중앙 집중식 상태 관리:** `renderDocumentContent(docId)`라는 단일 함수를 통해 상태 변경을 관리했습니다. 어떤 UI 요소에서 이벤트가 발생하든 이 함수가 호출되어, 전달된 ID를 기준으로 모든 관련된 컴포넌트의 상태를 한 번에 업데이트하도록 로직을 중앙화했습니다.
2.  **인덱싱을 통한 성능 향상:** `linkedByIndex`라는 인덱스 객체를 미리 생성했습니다. 이 객체는 `{'노드A_ID,노드B_ID': 1}`과 같은 형태로 어떤 노드들이 서로 연결되어 있는지 저장합니다. 덕분에 마우스 호버 시, 복잡한 배열 탐색 없이 즉시 연결된 노드를 찾아 하이라이트할 수 있게 되어 뛰어난 반응성을 확보했습니다.

## 결과 및 회고

오늘 하루 동안의 노력을 통해, 아이디어로만 존재하던 지식 그래프는 Jekyll 블로그 위에서 완벽하게 동작하는 인터랙티브 기능으로 재탄생했습니다. 사용자는 이제 자신의 `_obsidian` 지식 베이스가 어떻게 서로 연결되어 있는지 한눈에 파악하고, 그래프를 통해 문서를 탐색하는 새로운 경험을 할 수 있게 되었습니다.

정적 사이트 생성기인 Jekyll의 한계 내에서 동적인 데이터 시각화를 구현하는 것은 분명 도전적인 과제였지만, Liquid의 가능성을 최대한 활용하고 D3.js의 강력한 기능을 조합하여 성공적으로 목표를 달성할 수 있었습니다.
